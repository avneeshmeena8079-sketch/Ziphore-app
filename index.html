<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zyphor Holographic Delivery</title>
<style>
body { margin:0; font-family:sans-serif; background:#111; color:white; overflow-x:hidden; }
header { text-align:center; padding:20px; font-size:24px; background:linear-gradient(90deg,#4b6cb7,#182848);}
.tagline { font-size:16px; color:#ffd700;}
#login {display:flex; flex-direction:column; justify-content:center; align-items:center; height:100vh;}
#login input, #login button { padding:10px; margin:10px; border-radius:5px; border:none;}
#login button { background:#4b6cb7; color:white; cursor:pointer;}
#app { display:none; padding:20px;}
#products { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:15px;}
.product { background:#222; border-radius:10px; padding:10px; text-align:center;}
.product img { width:100%; height:150px; object-fit:cover; border-radius:10px;}
.product button { margin-top:10px; padding:5px 10px; border:none; border-radius:5px; background:#4b6cb7; color:white; cursor:pointer;}
#cart { margin-top:20px; background:#222; padding:10px; border-radius:10px;}
#cart ul { list-style:none; padding:0; }
#chat { margin-top:20px; background:#1a1a2e; padding:10px; border-radius:10px; max-height:250px; overflow-y:auto;}
.message { margin:5px 0; padding:8px 12px; border-radius:10px; max-width:80%; }
.customer { background:#4b6cb7; color:white; margin-left:auto; text-align:right; }
.ai { background:#fff; color:black; margin-right:auto; text-align:left; }
#chat-input { display:flex; margin-top:10px;}
#chat-input input { flex:1; padding:10px; border-radius:5px; border:none;}
#chat-input button { padding:10px 15px; margin-left:5px; border:none; border-radius:5px; background:#182848; color:white; cursor:pointer;}
#avatar-container { width:300px; height:300px; margin:auto; }
#mic-button { margin-top:10px; padding:10px; border:none; border-radius:5px; background:#ffd700; color:#111; cursor:pointer;}
</style>
</head>
<body>

<header>
    Zyphor Delivery<br>
    <span class="tagline">Virtual Presence, Real Delivery</span>
</header>

<div id="login">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Enter your name">
    <input type="text" id="phone" placeholder="Enter mobile number">
    <button onclick="login()">Namaste & Login</button>
    <div id="avatar-container"></div>
</div>

<div id="app">
    <h2>Menu</h2>
    <div id="products"></div>
    <div id="cart">
        <h3>Cart</h3>
        <ul id="cart-items"></ul>
        <strong>Total: â‚¹<span id="total">0</span></strong>
    </div>
    <div id="chat"></div>
    <div id="chat-input">
        <input type="text" id="message" placeholder="Type your message">
        <button onclick="sendMessage()">Send</button>
    </div>
    <button id="mic-button" onclick="startMic()">ðŸŽ¤ Speak</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.134/examples/js/controls/OrbitControls.js"></script>

<script>
// Products & cart
let cart=[];
const products=[
    {name:"Pizza", price:250, img:"https://images.unsplash.com/photo-1601924572311-12e8e8f1b083?fit=crop&w=400&q=80"},
    {name:"Burger", price:150, img:"https://images.unsplash.com/photo-1550547660-d9450f859349?fit=crop&w=400&q=80"},
    {name:"Sushi", price:400, img:"https://images.unsplash.com/photo-1562967916-eb82221dfb32?fit=crop&w=400&q=80"},
];

// Login
function login(){
    const user=document.getElementById("username").value;
    const phone=document.getElementById("phone").value;
    if(user && phone){
        document.getElementById("login").style.display="none";
        document.getElementById("app").style.display="block";
        loadProducts();
        addAIMessage(`Namaste ${user}! Main aapka holographic delivery assistant hoon.`);
        speak(`Namaste ${user}! Main aapka holographic delivery assistant hoon.`);
    } else { alert("Enter name and phone!"); }
}

// Load Products
function loadProducts(){
    const container=document.getElementById("products");
    products.forEach((p,i)=>{
        const div=document.createElement("div");
        div.className="product";
        div.innerHTML=`<img src="${p.img}" alt="${p.name}"><h4>${p.name}</h4><strong>â‚¹${p.price}</strong><br><button onclick="addToCart(${i})">Add to Cart</button>`;
        container.appendChild(div);
    });
}

// Cart functions
function addToCart(i){
    cart.push(products[i]);
    renderCart();
    addAIMessage(`${products[i].name} cart me add ho gaya.`);
    speak(`${products[i].name} cart me add ho gaya.`);
}

function renderCart(){
    const container=document.getElementById("cart-items");
    container.innerHTML="";
    let total=0;
    cart.forEach(item=>{
        const li=document.createElement("li");
        li.textContent=`${item.name} - â‚¹${item.price}`;
        container.appendChild(li);
        total+=item.price;
    });
    document.getElementById("total").textContent=total;
}

// Chat
function addAIMessage(text){
    const chat=document.getElementById("chat");
    const div=document.createElement("div");
    div.className="message ai";
    div.textContent=text;
    chat.appendChild(div);
    chat.scrollTop=chat.scrollHeight;
}

function sendMessage(){
    const input=document.getElementById("message");
    const text=input.value.trim();
    if(text=="") return;
    const chat=document.getElementById("chat");
    const div=document.createElement("div");
    div.className="message customer";
    div.textContent=text;
    chat.appendChild(div);
    chat.scrollTop=chat.scrollHeight;
    input.value="";
    setTimeout(()=>{ 
        addAIMessage(`Aapne kaha: "${text}". Order process hoga.`);
        speak(`Aapne kaha: ${text}. Order process hoga.`);
    },1000);
}

// Voice
function speak(text){
    const msg=new SpeechSynthesisUtterance();
    msg.text=text;
    msg.lang='hi-IN';
    window.speechSynthesis.speak(msg);
}

// Mic input
function startMic(){
    if(!('webkitSpeechRecognition' in window)){
        alert('Browser does not support voice recognition');
        return;
    }
    const recognition=new webkitSpeechRecognition();
    recognition.lang='hi-IN';
    recognition.interimResults=false;
    recognition.maxAlternatives=1;
    recognition.start();
    recognition.onresult=function(event){
        const speech=event.results[0][0].transcript;
        const input=document.getElementById("message");
        input.value=speech;
        sendMessage();
    }
}

// 3D Avatar
const container=document.getElementById("avatar-container");
const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(75,300/300,0.1,1000);
const renderer=new THREE.WebGLRenderer({antialias:true, alpha:true});
renderer.setSize(300,300);
container.appendChild(renderer.domElement);

const controls=new THREE.OrbitControls(camera, renderer.domElement);
controls.enableZoom=false; controls.enablePan=false;

const light=new THREE.DirectionalLight(0xffffff,1);
light.position.set(0,1,1).normalize();
scene.add(light);

// Avatar Sphere with your photo
const loader=new THREE.TextureLoader();
const texture=loader.load('https://i.imgur.com/1000005642.jpg'); 
const geometry=new THREE.SphereGeometry(1,32,32);
const material=new THREE.MeshPhongMaterial({map:texture});
const sphere=new THREE.Mesh(geometry, material);
scene.add(sphere);

camera.position.z=3;
function animate(){ requestAnimationFrame(animate); sphere.rotation.y+=0.01; renderer.render(scene,camera);}
animate();
</script>

</body>
</html>
